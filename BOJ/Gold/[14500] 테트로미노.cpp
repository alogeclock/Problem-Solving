// idea: implement

#include <bits/stdc++.h>
using namespace std;
#define ll long long
#define pll pair<ll, ll>

ll m[505][505];
ll tetromino[20][4][2] = {
  { { 0, 0 }, { 0, 0 }, { 0, 0 }, { 0, 0 } },
  { { 0, 0 }, { 1, 0 }, { 2, 0 }, { 2, 1 } },
  { { 0, 0 }, { 0, 1 }, { 0, 2 }, { -1, 2 } },
  { { 0, 0 }, { 0, 1 }, { 1, 1 }, { 2, 1 } },
  { { 0, 0 }, { 0, 1 }, { 0, 2 }, { 1, 0 } },
  { { 0, 0 }, { 0, 1 }, { -1, 1 }, { -2, 1 } },
  { { 0, 0 }, { 0, 1 }, { 0, 2 }, { 1, 2 } },
  { { 0, 0 }, { 0, 1 }, { 1, 0 }, { 2, 0 } },
  { { 0, 0 }, { 1, 0 }, { 1, 1 }, { 1, 2 } },
  { { 0, 0 }, { 0, 1 }, { 0, 2 }, { -1, 1 } },
  { { 0, 0 }, { 0, 1 }, { 0, 2 }, { 1, 1 } },
  { { 0, 0 }, { 1, 0 }, { 2, 0 }, { 1, -1 } },
  { { 0, 0 }, { 1, 0 }, { 2, 0 }, { 1, 1 } },
  { { 0, 0 }, { 0, 1 }, { 1, 0 }, { 1, 1 } },
  { { 0, 0 }, { 1, 0 }, { 1, 1 }, { 2, 1 } },
  { { 0, 0 }, { 0, 1 }, { -1, 1 }, { -1, 2 } },
  { { 0, 0 }, { 0, 1 }, { 1, 1 }, { 1, 2 } },
  { { 0, 0 }, { 0, 1 }, { 1, 0 }, { -1, 1 } },
  { { 0, 0 }, { 1, 0 }, { 2, 0 }, { 3, 0 } },
  { { 0, 0 }, { 0, 1 }, { 0, 2 }, { 0, 3 } },
};

int main() {
  ios_base::sync_with_stdio(false);
  cin.tie(NULL); cout.tie(NULL);

  ll N, M; cin >> N >> M;
  for (int i = 1; i <= N; i++)
    for (int j = 1; j <= M; j++)
      cin >> m[i][j];
  
  ll ans = 0;

  for (int i = 1; i <= N; i++) {
    for (int j = 1; j <= M; j++) {
      for (int t = 1; t <= 19; t++) {
        ll val = 0;
        for (int u = 0; u < 4; u++) {
          ll ci = i + tetromino[t][u][0], cj = j + tetromino[t][u][1];
          if (ci < 1 || cj < 1 || ci > N || cj > M) {
            val = -1;
            break;
          }
          val += m[ci][cj];
        }
        ans = max(ans, val);
      }
    }
  }

  cout << ans << '\n';
}